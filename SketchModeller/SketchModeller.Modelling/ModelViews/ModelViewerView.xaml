<UserControl x:Class="SketchModeller.Modelling.ModelViews.ModelViewerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:skm="http://SketchModeller"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <DockPanel LastChildFill="True">
        <Border BorderBrush="Black" BorderThickness="1" DockPanel.Dock="Bottom">
            <Grid x:Name="controlPanel">
                <Grid x:Name="navigationPanel">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.Resources>
                        <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                            <Setter Property="Focusable" Value="False" />
                        </Style>
                    </Grid.Resources>
                    <Button Content="↑" Grid.Row="0" Grid.Column="1" x:Name="up" Command="{Binding MoveForward}" />
                    <Button Content="←" Grid.Row="1" Grid.Column="0" x:Name="left" Command="{Binding MoveLeft}" />
                    <Button Content="→" Grid.Row="1" Grid.Column="2" x:Name="right" Command="{Binding MoveRight}" />
                    <Button Content="↓" Grid.Row="2" Grid.Column="1" x:Name="down" Command="{Binding MoveBack}" />
                    <TextBox Grid.Row="1" Grid.Column="1" PreviewKeyDown="OnTextboxPreviewKeyDown"/>
                </Grid>
            </Grid>
        </Border>
        <Border BorderBrush="Black" BorderThickness="1">
            <Viewport3D xmlns:cp="http://schemas.charlespetzold.com/2007/xaml"
                        x:Name="viewport">
                <Viewport3D.Camera>
                    <PerspectiveCamera x:Name="camera"
                                       Position="{Binding Position}"
                                       LookDirection="{Binding LookDirection}"
                                       UpDirection="{Binding UpDirection}"
                                       NearPlaneDistance="0.01"
                                       FarPlaneDistance="1000"/>
                </Viewport3D.Camera>
                <Viewport3D.Children>
                    <ModelVisual3D>
                        <ModelVisual3D.Content>
                            <PointLight Position="{Binding ElementName=camera, Path=Position}"
                                        Color="White" />
                        </ModelVisual3D.Content>
                    </ModelVisual3D>
                    <cp:Axes Color="Blue"
                             Extent="1"
                             Thickness="0.01"
                             LargeTick="0.5"
                             SmallTick="0.1" />
                    <skm:CloningVisual3D x:Name="primitivesDisplay" />
                </Viewport3D.Children>
            </Viewport3D>
        </Border>
    </DockPanel>
</UserControl>
